<?php
/**
 * Menu for switching between languages of a page.
 * available fiealds in $this->items: language, title, pageTitle
 */

$strParams ='';

// get url parameters
foreach($_GET as $k => $v){
    if($GLOBALS['TL_CONFIG']['i18nl10n_addLanguageToUrl'] && $k == 'language'){
        continue;
    }
    $strParams .='/'.$k.'/'.$v;
}

foreach ($this->items as $item):
?>

<a href="<?php echo $this->generateFrontendUrl($item,$strParams); ?>"
    <?php if ($item['isActive']) {echo ' class="active"';} ?>
    title="<?php echo $this->languages[$item['language']];?>"
    ><?php 
     echo "<img src=\"system/modules/i18nl10n/html/flag_icons/png/{$item['language']}.png\""
     ." title=\"{$this->languages[$item['language']]}\""
     ." alt=\"{$this->languages[$item['language']]}\" />"
     ?>
</a>
<?php 
endforeach; ?>

